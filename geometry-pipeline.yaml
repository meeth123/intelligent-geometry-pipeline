# Geometry Pipeline Configuration
# Auto-generated by Cursor AI Assistant
version: "1.0"
metadata:
  name: "geometry-pipeline"
  description: "AI-powered geometry image generation pipeline"
  created: "2024"
  
# Agent definitions with entrypoints and configurations
agents:
  prompt_interpreter:
    entrypoint: agents.prompt_interpreter:handle
    description: "Processes and interprets user prompts for geometry generation"
    timeout: 30
    
  image_preprocessor:
    entrypoint: agents.image_preprocessor:handle
    description: "Preprocesses input images for analysis"
    timeout: 60
    
  vision_interpreter:
    entrypoint: agents.vision_interpreter:handle
    description: "Analyzes and interprets visual content from images"
    timeout: 45
    
  symbolic_geometry_planner:
    entrypoint: agents.sym_planner:handle
    description: "Plans symbolic geometry structures and relationships"
    timeout: 120
    
  layout_designer:
    entrypoint: agents.layout_designer:handle
    description: "Designs optimal layout for geometric elements"
    timeout: 90
    
  renderer:
    entrypoint: agents.renderer:handle
    description: "Renders the final geometry visualization"
    timeout: 180
    
  verifier:
    entrypoint: agents.verifier:handle
    description: "Verifies output quality and correctness"
    timeout: 30
    
  stylist:
    entrypoint: agents.stylist:handle
    description: "Applies final styling and aesthetic improvements"
    timeout: 60

# Pipeline definitions
pipelines:
  generate_geometry_image:
    description: "Main pipeline for generating geometry images from prompts"
    retry_policy:
      max_retries: 3
      backoff_factor: 2
    
    steps:
      - agent: prompt_interpreter
        name: "interpret_prompt"
        required: true
        
      - conditional:
          name: "process_input_images"
          when: "{{input.images | length > 0}}"
          then:
            - agent: image_preprocessor
              name: "preprocess_images"
              required: true
            - agent: vision_interpreter
              name: "interpret_vision"
              required: true
              
      - agent: symbolic_geometry_planner
        name: "plan_geometry"
        required: true
        
      - agent: layout_designer
        name: "design_layout"
        required: true
        
      - agent: renderer
        name: "render_output"
        required: true
        
      - agent: verifier
        name: "verify_quality"
        required: false
        on_failure: "continue"
        
      - agent: stylist
        name: "apply_styling"
        required: false
        on_failure: "continue"
    
    on_failure: "abort"
    
    outputs:
      - name: "generated_image"
        type: "image"
        format: ["png", "svg", "pdf"]
      - name: "geometry_metadata"
        type: "json"
        
  # Alternative simplified pipeline
  quick_geometry:
    description: "Simplified pipeline for quick geometry generation"
    steps:
      - agent: prompt_interpreter
        name: "interpret_prompt"
      - agent: symbolic_geometry_planner
        name: "plan_geometry"
      - agent: renderer
        name: "render_output"
    on_failure: "abort"

# Global configuration
config:
  max_concurrent_agents: 4
  default_timeout: 60
  log_level: "INFO"
  enable_caching: true
  cache_ttl: 3600  # 1 hour 